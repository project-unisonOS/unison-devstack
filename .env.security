# Security Configuration Template
# Copy this to .env and update with your production values

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================
# Generate with: openssl rand -hex 32
# Must be 256+ bits for production security
UNISON_JWT_SECRET=change-this-secret-key-in-production-256-bits-minimum

# Token lifetimes (in minutes)
UNISON_ACCESS_TOKEN_EXPIRE_MINUTES=30
UNISON_REFRESH_TOKEN_EXPIRE_MINUTES=1440

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
# Generate with: openssl rand -base64 32
REDIS_PASSWORD=change-this-redis-password-in-production

# Redis connection
REDIS_HOST=redis
REDIS_PORT=6379

# ============================================================================
# SERVICE AUTHENTICATION SECRETS
# ============================================================================
# Generate each with: openssl rand -base64 32
# These are used for service-to-service authentication

UNISON_ORCHESTRATOR_SERVICE_SECRET=change-this-orchestrator-secret-in-production
UNISON_INFERENCE_SERVICE_SECRET=change-this-inference-secret-in-production
UNISON_POLICY_SERVICE_SECRET=change-this-policy-secret-in-production

# ============================================================================
# HTTPS AND SECURITY
# ============================================================================
# Force HTTPS in production
UNISON_FORCE_HTTPS=true

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Comma-separated list of allowed origins
UNISON_CORS_ORIGINS=https://localhost:3000,https://app.unison.local

# Allowed HTTP methods
UNISON_CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS

# Allowed headers
UNISON_CORS_HEADERS=Accept,Content-Type,Authorization

# ============================================================================
# HOST SECURITY
# ============================================================================
# Comma-separated list of allowed hostnames
# Prevents host header attacks
UNISON_ALLOWED_HOSTS=localhost,127.0.0.1,orchestrator,unison.local

# ============================================================================
# RATE LIMITING
# ============================================================================
# Global rate limits (requests per minute)
UNISON_GLOBAL_RATE_LIMIT=100

# Per-user rate limits
UNISON_USER_RATE_LIMIT=200
UNISON_INFERENCE_RATE_LIMIT=50
UNISON_STORAGE_RATE_LIMIT=200

# ============================================================================
# LOGGING AND MONITORING
# ============================================================================
# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Enable detailed security logging
UNISON_SECURITY_LOGGING=true

# ============================================================================
# EXTERNAL SERVICE CONFIGURATION
# ============================================================================
# OpenAI Configuration (if using OpenAI provider)
OPENAI_API_KEY=your-openai-api-key-here

# Azure OpenAI Configuration (if using Azure provider)
AZURE_OPENAI_ENDPOINT=your-azure-openai-endpoint-here
AZURE_OPENAI_API_KEY=your-azure-openai-api-key-here

# ============================================================================
# DEVELOPMENT/TESTING ONLY
# ============================================================================
# Set to false in production!
UNISON_SKIP_AUTH=false
UNISON_DEBUG_MODE=false

# ============================================================================
# PRODUCTION SECURITY SETTINGS
# ============================================================================
# Uncomment these for production deployment

# Disable debug endpoints
# UNISON_ENABLE_DEBUG_ENDPOINTS=false

# Require SSL for all connections
# UNISON_REQUIRE_SSL=true

# Enable certificate pinning
# UNISON_CERTIFICATE_PINNING=true

# Session security
# UNISON_SECURE_COOKIES=true
# UNISON_SAME_SITE_COOKIES=strict

# Content Security Policy
# UNISON_CSP_STRICT=true

# ============================================================================
# BACKUP AND RECOVERY
# ============================================================================
# Backup configuration
UNISON_BACKUP_ENABLED=true
UNISON_BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
UNISON_BACKUP_RETENTION_DAYS=30

# ============================================================================
# COMPLIANCE SETTINGS
# ============================================================================
# Data retention
UNISON_DATA_RETENTION_DAYS=365
UNISON_LOG_RETENTION_DAYS=90

# Privacy settings
UNISON_ANONYMIZE_LOGS=true
UNISON_DATA_MINIMIZATION=true
